<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vue event bus</title>
</head>

<body>
    <h1>在Vue中，实现各种关系的组件间消息传递</h1>
    <h1>一、同一实例下</h1>
    <h2>1、父与子之间(子组件的层级是不限的)</h2>
    <h2>2、同级组件之间</h2>
    <div id="app">
        <h3>实例A</h3>
        <h3>父组件</h3>
        <div>{{msg}}</div>
        <div>
            <button @click="startListen">开始监听事件</button>
            <button @click="cancelListen">取消监听事件</button>
            <button @click="listenOnce">只监听一次事件</button>
        </div>
        <div>
            <h3>子组件</h3>
            <child></child>
        </div>
    </div>
    <h1>二、同不同实例之间</h1>
    <div id="app2">
        <h3>实例B</h3>
        <button @click="add">触发事件(+2)</button>
    </div>
    <h1>evet bus 虽然方便，但是仅仅适合非常小型简单的项目，否则还请使用vuex</h1>
    <h1>说明</h1>
    <p>在vue内，通过this访问。</p>
    <pre>
    <code>
        使用方法与jq相似
        1、监听事件，传入事件名称(event)和句柄(handle)
        this.Eon(event, handle); 
        //this.Eon('add', this.add);

        2、监听一次
        this.Eonce(event, handle); 
        //this.Eonce('add', this.add);

        3、取消监听，传入事件名称和句柄
        this.Eoff(event, handle);
         //this.Eoff('add', this.add);

        4、触发事件，传入事件名称，需要传递参数时使用data
        this.Etrigger(event, data);
         //this.Etrigger('add', this.data);
         //this.Etrigger('add', {msg:1});
         
        5、匿名函数可以监听，但是无法取消监听。
    </code>
    </pre>
    <script type="text/x-template" id="child">
        <div>
            <button @click="add">触发事件(+1)</button>
        </div>
    </script>
    <script src="../node_modules/vue/dist/vue.js"></script>
    <script src="./EventBus.js"></script>
    <script src="./index.js"></script>
</body>

</html>